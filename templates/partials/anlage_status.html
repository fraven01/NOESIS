{% if anlage.anlage_nr == 3 %}
  {% url 'anlage3_file_review' anlage.pk as edit_url %}
{% elif anlage.anlage_nr == 4 %}
  {% url 'anlage4_review' anlage.pk as edit_url %}
{% elif anlage.anlage_nr == 5 %}
  {% url 'anlage5_review' anlage.pk as edit_url %}
{% elif anlage.anlage_nr == 6 %}
  {% url 'anlage6_review' anlage.pk as edit_url %}
{% else %}
  {% url 'projekt_file_edit_json' anlage.pk as edit_url %}
{% endif %}

<div id="anlage-edit-{{ anlage.pk }}" hx-swap="outerHTML"
    {% if anlage.processing_status == 'PROCESSING' or anlage.processing_status == 'PENDING' or anlage.is_verification_running %}
        hx-get="{% url 'hx_anlage_status' anlage.pk %}"
        hx-trigger="load, every 5s"
    {% endif %}>

{% if anlage.processing_status == 'PROCESSING' or anlage.is_verification_running %}
<span class="inline-block px-1 py-0.5 rounded bg-gray-500 text-white text-sm opacity-50 pointer-events-none">{% include 'partials/spinner.html' %} Analyse l√§uft...</span>
{% elif anlage.processing_status == 'COMPLETE' %}
<a href="{{ edit_url }}" class="inline-block px-1 py-0.5 rounded bg-primary text-white text-sm hover:bg-primary-dark">Analyse bearbeiten</a>
<form method="post" action="{% url 'trigger_file_analysis' anlage.pk %}" class="inline ml-2">
  {% csrf_token %}
  <button class="inline-block px-1 py-0.5 rounded bg-primary text-white text-sm hover:bg-primary-dark" title="Erneut analysieren">
      <i class="fas fa-sync-alt"></i>
  </button>
</form>
{% elif anlage.processing_status == 'FAILED' %}
<span class="text-red-600 mr-2">Analyse fehlgeschlagen</span>
<form method="post" action="{% url 'trigger_file_analysis' anlage.pk %}" class="inline">
  {% csrf_token %}
  <button class="inline-block px-1 py-0.5 rounded bg-primary text-white text-sm hover:bg-primary-dark">Erneut versuchen</button>
</form>
{% else %}
<form method="post" action="{% url 'trigger_file_analysis' anlage.pk %}" class="inline">
  {% csrf_token %}
  <button class="inline-block px-1 py-0.5 rounded bg-primary text-white text-sm hover:bg-primary-dark">Analyse starten</button>
</form>
{% endif %}

</div>

