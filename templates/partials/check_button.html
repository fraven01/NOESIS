{% comment %}Button für Anlagenprüfung mit optionalem Polling per htmx{% endcomment %}
<div id="check-btn-{{ file.pk }}"
     {% if file.anlage_nr == 2 and file.get_anlage2_state == 'running' %}
        hx-get="{% url 'hx_project_file_status' file.pk %}"
        hx-trigger="every 3s"
        hx-swap="outerHTML"
     {% endif %}>
    {% if file.anlage_nr == 5 %}
        <a href="{% url 'projekt_file_check_view' file.pk %}"
           class="{% if file.anlage5review %}bg-green-600{% else %}bg-red-600{% endif %} text-white px-2 py-1 rounded">Prüfen</a>
    {% elif file.anlage_nr == 6 %}
        <a href="{% url 'anlage6_review' file.pk %}"
           class="{% if file.anlage6_note or file.manual_reviewed %}bg-green-600{% else %}bg-red-600{% endif %} text-white px-2 py-1 rounded">Prüfen</a>
    {% else %}
        {% if file.anlage_nr == 2 %}
            {% if file.get_anlage2_state == 'running' %}
                <span class="bg-gray-400 text-white px-2 py-1 rounded disabled-btn"><span class="spinner"></span> Läuft...</span>
            {% else %}
                <a href="{% url 'projekt_file_check_view' file.pk %}"
                   class="{% if file.get_anlage2_state == 'parsed' %}bg-green-600{% else %}bg-red-600{% endif %} text-white px-2 py-1 rounded">Prüfen</a>
            {% endif %}
        {% else %}
            <a href="{% url 'projekt_file_check_view' file.pk %}"
               class="{% if file.analysis_json %}bg-green-600{% else %}bg-red-600{% endif %} text-white px-2 py-1 rounded">Prüfen</a>
        {% endif %}
    {% endif %}
</div>
