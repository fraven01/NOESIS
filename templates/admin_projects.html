{% extends 'base.html' %}
{% block title %}Admin Projekte{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold mb-4">Admin Projekte</h1>
<a href="{% url 'admin_prompts' %}" class="inline-block mb-4 px-4 py-2 bg-purple-600 text-white rounded">Prompts verwalten</a>
<a href="{% url 'admin_models' %}" class="inline-block mb-4 px-4 py-2 bg-purple-600 text-white rounded ml-2">LLM Modelle</a>
<form method="post">
    {% csrf_token %}
    <table class="min-w-full">
        <thead>
            <tr class="border-b text-left">
                <th class="py-2">Titel</th>
                <th class="py-2">Beschreibung</th>
                <th class="py-2">Software-Typen</th>
                <th class="py-2">Status</th>
                <th class="py-2">LLM geprüft</th>
                <th class="py-2 text-center">Aktion</th>
                <th class="py-2 text-center">Löschen</th>
            </tr>
        </thead>
        <tbody>
        {% for p in projects %}
            <tr class="border-b text-sm">
                <td class="py-1">{{ p.title }}</td>
                <td class="py-1">{{ p.beschreibung|truncatechars:50 }}</td>
                <td class="py-1">{{ p.software_typen }}</td>
                <td class="py-1">{{ p.get_status_display }}</td>
                <td class="py-1">{{ p.llm_geprueft|yesno:'Ja,Nein' }}</td>
                <td class="py-1 text-center">
                    <a href="{% url 'projekt_edit' p.pk %}" class="px-2 py-1 bg-blue-600 text-white rounded mr-2">Bearbeiten</a>
                    <form action="{% url 'admin_project_delete' p.pk %}" method="post" class="inline">
                        {% csrf_token %}
                        <button type="submit" class="px-2 py-1 bg-red-600 text-white rounded" onclick="return confirm('Projekt wirklich löschen?');">Löschen</button>
                    </form>
                </td>
                <td class="py-1 text-center"><input type="checkbox" name="delete" value="{{ p.id }}" class="form-checkbox"></td>
            </tr>
        {% empty %}
            <tr><td colspan="7" class="py-2">Keine Projekte</td></tr>
        {% endfor %}
        </tbody>
    </table>
    {% if projects %}
    <div class="mt-4">
        <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded" onclick="return confirm('Einträge wirklich löschen?');">Löschen</button>
    </div>
    {% endif %}
</form>
{% endblock %}
