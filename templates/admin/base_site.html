{% extends "base.html" %}
{% load i18n static %}

{% block title %}{{ title }} | NOESIS Admin{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/admin.css' %}">
{% endblock %}

{% block content %}
<div class="admin-container">
    <aside class="admin-sidebar">
        <h2 class="text-xl font-bold mb-4">Admin-Navigation</h2>
        <nav class="admin-nav space-y-4 text-sm">
            <div>
                <h3 class="accordion-header font-semibold text-gray-500 uppercase tracking-wider text-sm mb-2 cursor-pointer">Projekt-Konfiguration</h3>
                <div class="accordion-content pl-2 space-y-1 {% if request.resolver_match.url_name in 'admin_projects admin_project_statuses' %}block{% else %}hidden{% endif %}">
                    <a href="{% url 'admin_projects' %}" class="nav-link {% if request.resolver_match.url_name == 'admin_projects' %}active-nav-link{% endif %}">
                        <i class="fas fa-list-alt fa-fw mr-2"></i>
                        Projekt-Liste
                    </a>
                    <a href="{% url 'admin_project_statuses' %}" class="nav-link {% if request.resolver_match.url_name == 'admin_project_statuses' %}active-nav-link{% endif %}">
                        <i class="fas fa-flag fa-fw mr-2"></i>
                        Projekt-Status
                    </a>
                </div>
            </div>
            <div>
                <h3 class="accordion-header font-semibold text-gray-500 uppercase tracking-wider text-sm mb-2 cursor-pointer">Anlagen-Konfiguration</h3>
                <div class="accordion-content pl-2 space-y-1 {% if request.resolver_match.url_name in 'admin_anlage1 anlage2_function_list anlage2_config' %}block{% else %}hidden{% endif %}">
                    <a href="{% url 'admin_anlage1' %}" class="nav-link {% if request.resolver_match.url_name == 'admin_anlage1' %}active-nav-link{% endif %}">
                        <i class="fas fa-question-circle fa-fw mr-2"></i>
                        Anlage 1 Fragen
                    </a>
                    <a href="{% url 'anlage2_function_list' %}" class="nav-link {% if request.resolver_match.url_name == 'anlage2_function_list' %}active-nav-link{% endif %}">
                        <i class="fas fa-cogs fa-fw mr-2"></i>
                        Anlage 2 Funktionen
                    </a>
                    <a href="{% url 'anlage2_config' %}" class="nav-link {% if request.resolver_match.url_name == 'anlage2_config' %}active-nav-link{% endif %}">
                        <i class="fas fa-globe fa-fw mr-2"></i>
                        Anlage 2 Globale Phrasen
                    </a>
                </div>
            </div>
            <div>
                <h3 class="accordion-header font-semibold text-gray-500 uppercase tracking-wider text-sm mb-2 cursor-pointer">KI-Konfiguration</h3>
                <div class="accordion-content pl-2 space-y-1 {% if request.resolver_match.url_name in 'admin_llm_roles admin_prompts admin_models' %}block{% else %}hidden{% endif %}">
                    <a href="{% url 'admin_llm_roles' %}" class="nav-link {% if request.resolver_match.url_name == 'admin_llm_roles' %}active-nav-link{% endif %}">
                        <i class="fas fa-user-gear fa-fw mr-2"></i>
                        LLM-Rollen
                    </a>
                    <a href="{% url 'admin_prompts' %}" class="nav-link {% if request.resolver_match.url_name == 'admin_prompts' %}active-nav-link{% endif %}">
                        <i class="fas fa-pencil-alt fa-fw mr-2"></i>
                        Prompts
                    </a>
                    <a href="{% url 'admin_models' %}" class="nav-link {% if request.resolver_match.url_name == 'admin_models' %}active-nav-link{% endif %}">
                        <i class="fas fa-robot fa-fw mr-2"></i>
                        LLM-Modelle
                    </a>
                </div>
            </div>
            <div>
                <h3 class="accordion-header font-semibold text-gray-500 uppercase tracking-wider text-sm mb-2 cursor-pointer">Systemverwaltung</h3>
                <div class="accordion-content pl-2 space-y-1 {% if request.resolver_match.url_name in 'admin_user_list auth_group_changelist' %}block{% else %}hidden{% endif %}">
                    <a href="{% url 'admin_user_list' %}" class="nav-link {% if request.resolver_match.url_name == 'admin_user_list' %}active-nav-link{% endif %}">
                        <i class="fas fa-users fa-fw mr-2"></i>
                        Benutzer verwalten
                    </a>
                    <a href="{% url 'admin:auth_group_changelist' %}" class="nav-link {% if request.resolver_match.url_name == 'auth_group_changelist' %}active-nav-link{% endif %}">
                        <i class="fas fa-user-shield fa-fw mr-2"></i>
                        Gruppen
                    </a>
                </div>
            </div>
        </nav>
    </aside>

    <section class="admin-content">
        {% block admin_content %}
            <div id="content-main">
                {% block object-tools %}{% endblock %}
                {{ content }}
            </div>
        {% endblock %}
    </section>
</div>
{% endblock %}

{% block extra_js %}
<script>

    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.accordion-header').forEach(function(header) {
            header.addEventListener('click', function() {
                const content = header.nextElementSibling;
                content.classList.toggle('hidden');
            });

    document.querySelectorAll('.accordion-header').forEach(function(header) {
        header.addEventListener('click', function() {
            const content = header.nextElementSibling;
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
            } else {
                content.classList.add('hidden');
            }

        });
    });
</script>
{% endblock %}
