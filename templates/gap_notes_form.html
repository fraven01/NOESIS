{% extends 'base.html' %}
{% block extra_head %}
{{ block.super }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css">
{% endblock %}
{% block title %}Notizen bearbeiten{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold mb-4">Notizen zu {{ function_name }}</h1>
<form method="post" class="space-y-4">
    {% csrf_token %}
    <label class="block">
        (Extern) Anmerkungen für den Fachbereich
        <textarea name="gap_summary" rows="6" class="w-full border rounded p-2">{{ result.gap_summary }}</textarea>
    </label>
    <label class="block">
        Interne Arbeitsanmerkung (Gap-Analyse)
        <textarea name="gap_notiz" rows="6" class="w-full border rounded p-2">{{ result.gap_notiz }}</textarea>
    </label>
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Speichern</button>
    {% if anlage %}
    <a href="{% url 'projekt_file_edit_json' anlage.pk %}" class="ml-2 underline">Zurück</a>
    {% else %}
    <a href="{% url 'projekt_detail' result.projekt.pk %}" class="ml-2 underline">Zurück</a>
    {% endif %}
</form>
{% endblock %}
{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('textarea').forEach(el => new EasyMDE({ element: el }));
});
</script>
{% endblock %}
